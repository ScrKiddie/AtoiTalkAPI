// Code generated by ent, DO NOT EDIT.

package migrate

import (
	"entgo.io/ent/dialect/entsql"
	"entgo.io/ent/dialect/sql/schema"
	"entgo.io/ent/schema/field"
)

var (
	// ChatsColumns holds the columns for the "chats" table.
	ChatsColumns = []*schema.Column{
		{Name: "id", Type: field.TypeUUID},
		{Name: "created_at", Type: field.TypeTime, Default: "CURRENT_TIMESTAMP"},
		{Name: "updated_at", Type: field.TypeTime, Default: "CURRENT_TIMESTAMP"},
		{Name: "type", Type: field.TypeEnum, Enums: []string{"private", "group"}},
		{Name: "last_message_at", Type: field.TypeTime, Nullable: true},
		{Name: "deleted_at", Type: field.TypeTime, Nullable: true},
		{Name: "last_message_id", Type: field.TypeUUID, Nullable: true},
	}
	// ChatsTable holds the schema information for the "chats" table.
	ChatsTable = &schema.Table{
		Name:       "chats",
		Columns:    ChatsColumns,
		PrimaryKey: []*schema.Column{ChatsColumns[0]},
		ForeignKeys: []*schema.ForeignKey{
			{
				Symbol:     "chats_messages_last_message",
				Columns:    []*schema.Column{ChatsColumns[6]},
				RefColumns: []*schema.Column{MessagesColumns[0]},
				OnDelete:   schema.SetNull,
			},
		},
		Indexes: []*schema.Index{
			{
				Name:    "chat_updated_at",
				Unique:  false,
				Columns: []*schema.Column{ChatsColumns[2]},
			},
			{
				Name:    "chat_last_message_at",
				Unique:  false,
				Columns: []*schema.Column{ChatsColumns[4]},
			},
		},
	}
	// GroupChatsColumns holds the columns for the "group_chats" table.
	GroupChatsColumns = []*schema.Column{
		{Name: "id", Type: field.TypeUUID},
		{Name: "name", Type: field.TypeString, Size: 100},
		{Name: "description", Type: field.TypeString, Nullable: true, Size: 2147483647},
		{Name: "is_public", Type: field.TypeBool, Default: false},
		{Name: "invite_code", Type: field.TypeString, Unique: true, Size: 50},
		{Name: "invite_expires_at", Type: field.TypeTime, Nullable: true},
		{Name: "chat_id", Type: field.TypeUUID, Unique: true},
		{Name: "avatar_id", Type: field.TypeUUID, Unique: true, Nullable: true},
		{Name: "created_by", Type: field.TypeUUID, Nullable: true},
	}
	// GroupChatsTable holds the schema information for the "group_chats" table.
	GroupChatsTable = &schema.Table{
		Name:       "group_chats",
		Columns:    GroupChatsColumns,
		PrimaryKey: []*schema.Column{GroupChatsColumns[0]},
		ForeignKeys: []*schema.ForeignKey{
			{
				Symbol:     "group_chats_chats_group_chat",
				Columns:    []*schema.Column{GroupChatsColumns[6]},
				RefColumns: []*schema.Column{ChatsColumns[0]},
				OnDelete:   schema.Cascade,
			},
			{
				Symbol:     "group_chats_media_group_avatar",
				Columns:    []*schema.Column{GroupChatsColumns[7]},
				RefColumns: []*schema.Column{MediaColumns[0]},
				OnDelete:   schema.SetNull,
			},
			{
				Symbol:     "group_chats_users_created_groups",
				Columns:    []*schema.Column{GroupChatsColumns[8]},
				RefColumns: []*schema.Column{UsersColumns[0]},
				OnDelete:   schema.SetNull,
			},
		},
	}
	// GroupMembersColumns holds the columns for the "group_members" table.
	GroupMembersColumns = []*schema.Column{
		{Name: "id", Type: field.TypeUUID},
		{Name: "role", Type: field.TypeEnum, Enums: []string{"owner", "admin", "member"}, Default: "member"},
		{Name: "last_read_at", Type: field.TypeTime, Nullable: true},
		{Name: "joined_at", Type: field.TypeTime},
		{Name: "unread_count", Type: field.TypeInt, Default: 0},
		{Name: "group_chat_id", Type: field.TypeUUID},
		{Name: "user_id", Type: field.TypeUUID},
	}
	// GroupMembersTable holds the schema information for the "group_members" table.
	GroupMembersTable = &schema.Table{
		Name:       "group_members",
		Columns:    GroupMembersColumns,
		PrimaryKey: []*schema.Column{GroupMembersColumns[0]},
		ForeignKeys: []*schema.ForeignKey{
			{
				Symbol:     "group_members_group_chats_members",
				Columns:    []*schema.Column{GroupMembersColumns[5]},
				RefColumns: []*schema.Column{GroupChatsColumns[0]},
				OnDelete:   schema.Cascade,
			},
			{
				Symbol:     "group_members_users_group_memberships",
				Columns:    []*schema.Column{GroupMembersColumns[6]},
				RefColumns: []*schema.Column{UsersColumns[0]},
				OnDelete:   schema.Cascade,
			},
		},
		Indexes: []*schema.Index{
			{
				Name:    "pk_group_member",
				Unique:  true,
				Columns: []*schema.Column{GroupMembersColumns[5], GroupMembersColumns[6]},
			},
			{
				Name:    "groupmember_user_id",
				Unique:  false,
				Columns: []*schema.Column{GroupMembersColumns[6]},
			},
		},
	}
	// MediaColumns holds the columns for the "media" table.
	MediaColumns = []*schema.Column{
		{Name: "id", Type: field.TypeUUID},
		{Name: "created_at", Type: field.TypeTime, Default: "CURRENT_TIMESTAMP"},
		{Name: "updated_at", Type: field.TypeTime, Default: "CURRENT_TIMESTAMP"},
		{Name: "file_name", Type: field.TypeString, Unique: true, Size: 255},
		{Name: "original_name", Type: field.TypeString, Size: 255},
		{Name: "file_size", Type: field.TypeInt64},
		{Name: "mime_type", Type: field.TypeString, Size: 100},
		{Name: "category", Type: field.TypeEnum, Enums: []string{"user_avatar", "group_avatar", "message_attachment"}, Default: "message_attachment"},
		{Name: "status", Type: field.TypeEnum, Enums: []string{"pending", "active", "failed"}, Default: "pending"},
		{Name: "message_id", Type: field.TypeUUID, Nullable: true},
		{Name: "uploaded_by_id", Type: field.TypeUUID},
	}
	// MediaTable holds the schema information for the "media" table.
	MediaTable = &schema.Table{
		Name:       "media",
		Columns:    MediaColumns,
		PrimaryKey: []*schema.Column{MediaColumns[0]},
		ForeignKeys: []*schema.ForeignKey{
			{
				Symbol:     "media_messages_attachments",
				Columns:    []*schema.Column{MediaColumns[9]},
				RefColumns: []*schema.Column{MessagesColumns[0]},
				OnDelete:   schema.Cascade,
			},
			{
				Symbol:     "media_users_uploaded_media",
				Columns:    []*schema.Column{MediaColumns[10]},
				RefColumns: []*schema.Column{UsersColumns[0]},
				OnDelete:   schema.Cascade,
			},
		},
	}
	// MessagesColumns holds the columns for the "messages" table.
	MessagesColumns = []*schema.Column{
		{Name: "id", Type: field.TypeUUID},
		{Name: "created_at", Type: field.TypeTime, Default: "CURRENT_TIMESTAMP"},
		{Name: "updated_at", Type: field.TypeTime, Default: "CURRENT_TIMESTAMP"},
		{Name: "type", Type: field.TypeEnum, Enums: []string{"regular", "system_create", "system_rename", "system_description", "system_avatar", "system_join", "system_add", "system_leave", "system_kick", "system_promote", "system_demote"}, Default: "regular"},
		{Name: "content", Type: field.TypeString, Nullable: true, Size: 2147483647},
		{Name: "action_data", Type: field.TypeJSON, Nullable: true},
		{Name: "deleted_at", Type: field.TypeTime, Nullable: true},
		{Name: "edited_at", Type: field.TypeTime, Nullable: true},
		{Name: "chat_id", Type: field.TypeUUID},
		{Name: "reply_to_id", Type: field.TypeUUID, Nullable: true},
		{Name: "sender_id", Type: field.TypeUUID, Nullable: true},
	}
	// MessagesTable holds the schema information for the "messages" table.
	MessagesTable = &schema.Table{
		Name:       "messages",
		Columns:    MessagesColumns,
		PrimaryKey: []*schema.Column{MessagesColumns[0]},
		ForeignKeys: []*schema.ForeignKey{
			{
				Symbol:     "messages_chats_messages",
				Columns:    []*schema.Column{MessagesColumns[8]},
				RefColumns: []*schema.Column{ChatsColumns[0]},
				OnDelete:   schema.Cascade,
			},
			{
				Symbol:     "messages_messages_reply_to",
				Columns:    []*schema.Column{MessagesColumns[9]},
				RefColumns: []*schema.Column{MessagesColumns[0]},
				OnDelete:   schema.SetNull,
			},
			{
				Symbol:     "messages_users_sent_messages",
				Columns:    []*schema.Column{MessagesColumns[10]},
				RefColumns: []*schema.Column{UsersColumns[0]},
				OnDelete:   schema.SetNull,
			},
		},
		Indexes: []*schema.Index{
			{
				Name:    "idx_messages_chat_active",
				Unique:  false,
				Columns: []*schema.Column{MessagesColumns[8], MessagesColumns[1]},
				Annotation: &entsql.IndexAnnotation{
					Desc:  true,
					Where: "deleted_at IS NULL",
				},
			},
			{
				Name:    "message_reply_to_id",
				Unique:  false,
				Columns: []*schema.Column{MessagesColumns[9]},
				Annotation: &entsql.IndexAnnotation{
					Where: "reply_to_id IS NOT NULL AND deleted_at IS NULL",
				},
			},
		},
	}
	// PrivateChatsColumns holds the columns for the "private_chats" table.
	PrivateChatsColumns = []*schema.Column{
		{Name: "id", Type: field.TypeUUID},
		{Name: "user1_last_read_at", Type: field.TypeTime, Nullable: true},
		{Name: "user2_last_read_at", Type: field.TypeTime, Nullable: true},
		{Name: "user1_hidden_at", Type: field.TypeTime, Nullable: true},
		{Name: "user2_hidden_at", Type: field.TypeTime, Nullable: true},
		{Name: "user1_unread_count", Type: field.TypeInt, Default: 0},
		{Name: "user2_unread_count", Type: field.TypeInt, Default: 0},
		{Name: "chat_id", Type: field.TypeUUID, Unique: true},
		{Name: "user1_id", Type: field.TypeUUID},
		{Name: "user2_id", Type: field.TypeUUID},
	}
	// PrivateChatsTable holds the schema information for the "private_chats" table.
	PrivateChatsTable = &schema.Table{
		Name:       "private_chats",
		Columns:    PrivateChatsColumns,
		PrimaryKey: []*schema.Column{PrivateChatsColumns[0]},
		ForeignKeys: []*schema.ForeignKey{
			{
				Symbol:     "private_chats_chats_private_chat",
				Columns:    []*schema.Column{PrivateChatsColumns[7]},
				RefColumns: []*schema.Column{ChatsColumns[0]},
				OnDelete:   schema.Cascade,
			},
			{
				Symbol:     "private_chats_users_private_chats_as_user1",
				Columns:    []*schema.Column{PrivateChatsColumns[8]},
				RefColumns: []*schema.Column{UsersColumns[0]},
				OnDelete:   schema.Cascade,
			},
			{
				Symbol:     "private_chats_users_private_chats_as_user2",
				Columns:    []*schema.Column{PrivateChatsColumns[9]},
				RefColumns: []*schema.Column{UsersColumns[0]},
				OnDelete:   schema.Cascade,
			},
		},
		Indexes: []*schema.Index{
			{
				Name:    "unique_user_pair",
				Unique:  true,
				Columns: []*schema.Column{PrivateChatsColumns[8], PrivateChatsColumns[9]},
			},
			{
				Name:    "privatechat_user2_id",
				Unique:  false,
				Columns: []*schema.Column{PrivateChatsColumns[9]},
			},
		},
	}
	// ReportsColumns holds the columns for the "reports" table.
	ReportsColumns = []*schema.Column{
		{Name: "id", Type: field.TypeUUID},
		{Name: "target_type", Type: field.TypeEnum, Enums: []string{"message", "group", "user"}},
		{Name: "reason", Type: field.TypeString},
		{Name: "description", Type: field.TypeString, Nullable: true, Size: 2147483647},
		{Name: "evidence_snapshot", Type: field.TypeJSON, Nullable: true},
		{Name: "status", Type: field.TypeEnum, Enums: []string{"pending", "reviewed", "resolved", "rejected"}, Default: "pending"},
		{Name: "created_at", Type: field.TypeTime},
		{Name: "updated_at", Type: field.TypeTime},
		{Name: "message_id", Type: field.TypeUUID, Nullable: true},
		{Name: "group_id", Type: field.TypeUUID, Nullable: true},
		{Name: "target_user_id", Type: field.TypeUUID, Nullable: true},
		{Name: "reporter_id", Type: field.TypeUUID},
		{Name: "user_reports_received", Type: field.TypeUUID, Nullable: true},
	}
	// ReportsTable holds the schema information for the "reports" table.
	ReportsTable = &schema.Table{
		Name:       "reports",
		Columns:    ReportsColumns,
		PrimaryKey: []*schema.Column{ReportsColumns[0]},
		ForeignKeys: []*schema.ForeignKey{
			{
				Symbol:     "reports_messages_message",
				Columns:    []*schema.Column{ReportsColumns[8]},
				RefColumns: []*schema.Column{MessagesColumns[0]},
				OnDelete:   schema.SetNull,
			},
			{
				Symbol:     "reports_group_chats_group",
				Columns:    []*schema.Column{ReportsColumns[9]},
				RefColumns: []*schema.Column{GroupChatsColumns[0]},
				OnDelete:   schema.SetNull,
			},
			{
				Symbol:     "reports_users_target_user",
				Columns:    []*schema.Column{ReportsColumns[10]},
				RefColumns: []*schema.Column{UsersColumns[0]},
				OnDelete:   schema.SetNull,
			},
			{
				Symbol:     "reports_users_reports_made",
				Columns:    []*schema.Column{ReportsColumns[11]},
				RefColumns: []*schema.Column{UsersColumns[0]},
				OnDelete:   schema.NoAction,
			},
			{
				Symbol:     "reports_users_reports_received",
				Columns:    []*schema.Column{ReportsColumns[12]},
				RefColumns: []*schema.Column{UsersColumns[0]},
				OnDelete:   schema.SetNull,
			},
		},
		Indexes: []*schema.Index{
			{
				Name:    "report_status",
				Unique:  false,
				Columns: []*schema.Column{ReportsColumns[5]},
			},
			{
				Name:    "report_created_at",
				Unique:  false,
				Columns: []*schema.Column{ReportsColumns[6]},
			},
			{
				Name:    "report_reporter_id",
				Unique:  false,
				Columns: []*schema.Column{ReportsColumns[11]},
			},
		},
	}
	// UsersColumns holds the columns for the "users" table.
	UsersColumns = []*schema.Column{
		{Name: "id", Type: field.TypeUUID},
		{Name: "created_at", Type: field.TypeTime, Default: "CURRENT_TIMESTAMP"},
		{Name: "updated_at", Type: field.TypeTime, Default: "CURRENT_TIMESTAMP"},
		{Name: "email", Type: field.TypeString, Unique: true, Nullable: true, Size: 255},
		{Name: "username", Type: field.TypeString, Unique: true, Nullable: true, Size: 50},
		{Name: "password_hash", Type: field.TypeString, Nullable: true, Size: 255},
		{Name: "full_name", Type: field.TypeString, Nullable: true, Size: 100},
		{Name: "bio", Type: field.TypeString, Nullable: true, Size: 255},
		{Name: "last_seen_at", Type: field.TypeTime, Nullable: true},
		{Name: "deleted_at", Type: field.TypeTime, Nullable: true},
		{Name: "role", Type: field.TypeEnum, Enums: []string{"user", "admin"}, Default: "user"},
		{Name: "is_banned", Type: field.TypeBool, Default: false},
		{Name: "banned_until", Type: field.TypeTime, Nullable: true},
		{Name: "ban_reason", Type: field.TypeString, Nullable: true},
		{Name: "avatar_id", Type: field.TypeUUID, Unique: true, Nullable: true},
	}
	// UsersTable holds the schema information for the "users" table.
	UsersTable = &schema.Table{
		Name:       "users",
		Columns:    UsersColumns,
		PrimaryKey: []*schema.Column{UsersColumns[0]},
		ForeignKeys: []*schema.ForeignKey{
			{
				Symbol:     "users_media_user_avatar",
				Columns:    []*schema.Column{UsersColumns[14]},
				RefColumns: []*schema.Column{MediaColumns[0]},
				OnDelete:   schema.SetNull,
			},
		},
		Indexes: []*schema.Index{
			{
				Name:    "user_full_name",
				Unique:  false,
				Columns: []*schema.Column{UsersColumns[6]},
			},
		},
	}
	// UserBlocksColumns holds the columns for the "user_blocks" table.
	UserBlocksColumns = []*schema.Column{
		{Name: "id", Type: field.TypeUUID},
		{Name: "created_at", Type: field.TypeTime, Default: "CURRENT_TIMESTAMP"},
		{Name: "updated_at", Type: field.TypeTime, Default: "CURRENT_TIMESTAMP"},
		{Name: "blocker_id", Type: field.TypeUUID},
		{Name: "blocked_id", Type: field.TypeUUID},
	}
	// UserBlocksTable holds the schema information for the "user_blocks" table.
	UserBlocksTable = &schema.Table{
		Name:       "user_blocks",
		Columns:    UserBlocksColumns,
		PrimaryKey: []*schema.Column{UserBlocksColumns[0]},
		ForeignKeys: []*schema.ForeignKey{
			{
				Symbol:     "user_blocks_users_blocked_users_rel",
				Columns:    []*schema.Column{UserBlocksColumns[3]},
				RefColumns: []*schema.Column{UsersColumns[0]},
				OnDelete:   schema.Cascade,
			},
			{
				Symbol:     "user_blocks_users_blocked_by_rel",
				Columns:    []*schema.Column{UserBlocksColumns[4]},
				RefColumns: []*schema.Column{UsersColumns[0]},
				OnDelete:   schema.Cascade,
			},
		},
		Indexes: []*schema.Index{
			{
				Name:    "userblock_blocker_id_blocked_id",
				Unique:  true,
				Columns: []*schema.Column{UserBlocksColumns[3], UserBlocksColumns[4]},
			},
		},
	}
	// UserIdentitiesColumns holds the columns for the "user_identities" table.
	UserIdentitiesColumns = []*schema.Column{
		{Name: "id", Type: field.TypeUUID},
		{Name: "created_at", Type: field.TypeTime, Default: "CURRENT_TIMESTAMP"},
		{Name: "updated_at", Type: field.TypeTime, Default: "CURRENT_TIMESTAMP"},
		{Name: "provider", Type: field.TypeEnum, Enums: []string{"google"}, Default: "google"},
		{Name: "provider_id", Type: field.TypeString, Size: 255},
		{Name: "provider_email", Type: field.TypeString, Nullable: true, Size: 255},
		{Name: "user_id", Type: field.TypeUUID},
	}
	// UserIdentitiesTable holds the schema information for the "user_identities" table.
	UserIdentitiesTable = &schema.Table{
		Name:       "user_identities",
		Columns:    UserIdentitiesColumns,
		PrimaryKey: []*schema.Column{UserIdentitiesColumns[0]},
		ForeignKeys: []*schema.ForeignKey{
			{
				Symbol:     "user_identities_users_identities",
				Columns:    []*schema.Column{UserIdentitiesColumns[6]},
				RefColumns: []*schema.Column{UsersColumns[0]},
				OnDelete:   schema.Cascade,
			},
		},
		Indexes: []*schema.Index{
			{
				Name:    "useridentity_provider_provider_id",
				Unique:  true,
				Columns: []*schema.Column{UserIdentitiesColumns[3], UserIdentitiesColumns[4]},
			},
			{
				Name:    "useridentity_user_id_provider",
				Unique:  true,
				Columns: []*schema.Column{UserIdentitiesColumns[6], UserIdentitiesColumns[3]},
			},
		},
	}
	// ReportEvidenceMediaColumns holds the columns for the "report_evidence_media" table.
	ReportEvidenceMediaColumns = []*schema.Column{
		{Name: "report_id", Type: field.TypeUUID},
		{Name: "media_id", Type: field.TypeUUID},
	}
	// ReportEvidenceMediaTable holds the schema information for the "report_evidence_media" table.
	ReportEvidenceMediaTable = &schema.Table{
		Name:       "report_evidence_media",
		Columns:    ReportEvidenceMediaColumns,
		PrimaryKey: []*schema.Column{ReportEvidenceMediaColumns[0], ReportEvidenceMediaColumns[1]},
		ForeignKeys: []*schema.ForeignKey{
			{
				Symbol:     "report_evidence_media_report_id",
				Columns:    []*schema.Column{ReportEvidenceMediaColumns[0]},
				RefColumns: []*schema.Column{ReportsColumns[0]},
				OnDelete:   schema.Cascade,
			},
			{
				Symbol:     "report_evidence_media_media_id",
				Columns:    []*schema.Column{ReportEvidenceMediaColumns[1]},
				RefColumns: []*schema.Column{MediaColumns[0]},
				OnDelete:   schema.Cascade,
			},
		},
	}
	// Tables holds all the tables in the schema.
	Tables = []*schema.Table{
		ChatsTable,
		GroupChatsTable,
		GroupMembersTable,
		MediaTable,
		MessagesTable,
		PrivateChatsTable,
		ReportsTable,
		UsersTable,
		UserBlocksTable,
		UserIdentitiesTable,
		ReportEvidenceMediaTable,
	}
)

func init() {
	ChatsTable.ForeignKeys[0].RefTable = MessagesTable
	GroupChatsTable.ForeignKeys[0].RefTable = ChatsTable
	GroupChatsTable.ForeignKeys[1].RefTable = MediaTable
	GroupChatsTable.ForeignKeys[2].RefTable = UsersTable
	GroupMembersTable.ForeignKeys[0].RefTable = GroupChatsTable
	GroupMembersTable.ForeignKeys[1].RefTable = UsersTable
	MediaTable.ForeignKeys[0].RefTable = MessagesTable
	MediaTable.ForeignKeys[1].RefTable = UsersTable
	MessagesTable.ForeignKeys[0].RefTable = ChatsTable
	MessagesTable.ForeignKeys[1].RefTable = MessagesTable
	MessagesTable.ForeignKeys[2].RefTable = UsersTable
	PrivateChatsTable.ForeignKeys[0].RefTable = ChatsTable
	PrivateChatsTable.ForeignKeys[1].RefTable = UsersTable
	PrivateChatsTable.ForeignKeys[2].RefTable = UsersTable
	ReportsTable.ForeignKeys[0].RefTable = MessagesTable
	ReportsTable.ForeignKeys[1].RefTable = GroupChatsTable
	ReportsTable.ForeignKeys[2].RefTable = UsersTable
	ReportsTable.ForeignKeys[3].RefTable = UsersTable
	ReportsTable.ForeignKeys[4].RefTable = UsersTable
	UsersTable.ForeignKeys[0].RefTable = MediaTable
	UserBlocksTable.ForeignKeys[0].RefTable = UsersTable
	UserBlocksTable.ForeignKeys[1].RefTable = UsersTable
	UserIdentitiesTable.ForeignKeys[0].RefTable = UsersTable
	ReportEvidenceMediaTable.ForeignKeys[0].RefTable = ReportsTable
	ReportEvidenceMediaTable.ForeignKeys[1].RefTable = MediaTable
}
