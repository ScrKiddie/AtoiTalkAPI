// Code generated by ent, DO NOT EDIT.

package migrate

import (
	"entgo.io/ent/dialect/entsql"
	"entgo.io/ent/dialect/sql/schema"
	"entgo.io/ent/schema/field"
)

var (
	// AttachmentsColumns holds the columns for the "attachments" table.
	AttachmentsColumns = []*schema.Column{
		{Name: "id", Type: field.TypeInt, Increment: true},
		{Name: "created_at", Type: field.TypeTime, Default: "CURRENT_TIMESTAMP"},
		{Name: "updated_at", Type: field.TypeTime, Default: "CURRENT_TIMESTAMP"},
		{Name: "file_name", Type: field.TypeString, Size: 255},
		{Name: "file_type", Type: field.TypeEnum, Enums: []string{"image", "video", "audio", "document", "code", "archive", "executable", "other"}},
		{Name: "original_name", Type: field.TypeString, Size: 255},
		{Name: "file_size", Type: field.TypeInt64},
		{Name: "message_id", Type: field.TypeInt, Nullable: true},
	}
	// AttachmentsTable holds the schema information for the "attachments" table.
	AttachmentsTable = &schema.Table{
		Name:       "attachments",
		Columns:    AttachmentsColumns,
		PrimaryKey: []*schema.Column{AttachmentsColumns[0]},
		ForeignKeys: []*schema.ForeignKey{
			{
				Symbol:     "attachments_messages_attachments",
				Columns:    []*schema.Column{AttachmentsColumns[7]},
				RefColumns: []*schema.Column{MessagesColumns[0]},
				OnDelete:   schema.Cascade,
			},
		},
		Indexes: []*schema.Index{
			{
				Name:    "attachment_message_id",
				Unique:  false,
				Columns: []*schema.Column{AttachmentsColumns[7]},
				Annotation: &entsql.IndexAnnotation{
					Where: "message_id IS NOT NULL",
				},
			},
		},
	}
	// ChatsColumns holds the columns for the "chats" table.
	ChatsColumns = []*schema.Column{
		{Name: "id", Type: field.TypeInt, Increment: true},
		{Name: "created_at", Type: field.TypeTime, Default: "CURRENT_TIMESTAMP"},
		{Name: "updated_at", Type: field.TypeTime, Default: "CURRENT_TIMESTAMP"},
		{Name: "type", Type: field.TypeEnum, Enums: []string{"private", "group"}},
		{Name: "last_message_id", Type: field.TypeInt, Nullable: true},
	}
	// ChatsTable holds the schema information for the "chats" table.
	ChatsTable = &schema.Table{
		Name:       "chats",
		Columns:    ChatsColumns,
		PrimaryKey: []*schema.Column{ChatsColumns[0]},
		ForeignKeys: []*schema.ForeignKey{
			{
				Symbol:     "chats_messages_last_message",
				Columns:    []*schema.Column{ChatsColumns[4]},
				RefColumns: []*schema.Column{MessagesColumns[0]},
				OnDelete:   schema.SetNull,
			},
		},
		Indexes: []*schema.Index{
			{
				Name:    "idx_chats_last_msg_created",
				Unique:  false,
				Columns: []*schema.Column{ChatsColumns[4], ChatsColumns[1]},
				Annotation: &entsql.IndexAnnotation{
					Desc:  true,
					Where: "last_message_id IS NOT NULL",
				},
			},
		},
	}
	// GroupChatsColumns holds the columns for the "group_chats" table.
	GroupChatsColumns = []*schema.Column{
		{Name: "id", Type: field.TypeInt, Increment: true},
		{Name: "name", Type: field.TypeString, Size: 100},
		{Name: "description", Type: field.TypeString, Nullable: true, Size: 2147483647},
		{Name: "avatar_file_name", Type: field.TypeString, Nullable: true, Size: 255},
		{Name: "chat_id", Type: field.TypeInt, Unique: true},
		{Name: "created_by", Type: field.TypeInt},
	}
	// GroupChatsTable holds the schema information for the "group_chats" table.
	GroupChatsTable = &schema.Table{
		Name:       "group_chats",
		Columns:    GroupChatsColumns,
		PrimaryKey: []*schema.Column{GroupChatsColumns[0]},
		ForeignKeys: []*schema.ForeignKey{
			{
				Symbol:     "group_chats_chats_group_chat",
				Columns:    []*schema.Column{GroupChatsColumns[4]},
				RefColumns: []*schema.Column{ChatsColumns[0]},
				OnDelete:   schema.Cascade,
			},
			{
				Symbol:     "group_chats_users_created_groups",
				Columns:    []*schema.Column{GroupChatsColumns[5]},
				RefColumns: []*schema.Column{UsersColumns[0]},
				OnDelete:   schema.Cascade,
			},
		},
	}
	// GroupMembersColumns holds the columns for the "group_members" table.
	GroupMembersColumns = []*schema.Column{
		{Name: "id", Type: field.TypeInt, Increment: true},
		{Name: "role", Type: field.TypeEnum, Enums: []string{"admin", "member"}, Default: "member"},
		{Name: "last_read_at", Type: field.TypeTime, Nullable: true},
		{Name: "joined_at", Type: field.TypeTime},
		{Name: "group_chat_id", Type: field.TypeInt},
		{Name: "user_id", Type: field.TypeInt},
	}
	// GroupMembersTable holds the schema information for the "group_members" table.
	GroupMembersTable = &schema.Table{
		Name:       "group_members",
		Columns:    GroupMembersColumns,
		PrimaryKey: []*schema.Column{GroupMembersColumns[0]},
		ForeignKeys: []*schema.ForeignKey{
			{
				Symbol:     "group_members_group_chats_members",
				Columns:    []*schema.Column{GroupMembersColumns[4]},
				RefColumns: []*schema.Column{GroupChatsColumns[0]},
				OnDelete:   schema.Cascade,
			},
			{
				Symbol:     "group_members_users_group_memberships",
				Columns:    []*schema.Column{GroupMembersColumns[5]},
				RefColumns: []*schema.Column{UsersColumns[0]},
				OnDelete:   schema.Cascade,
			},
		},
		Indexes: []*schema.Index{
			{
				Name:    "pk_group_member",
				Unique:  true,
				Columns: []*schema.Column{GroupMembersColumns[4], GroupMembersColumns[5]},
			},
		},
	}
	// MessagesColumns holds the columns for the "messages" table.
	MessagesColumns = []*schema.Column{
		{Name: "id", Type: field.TypeInt, Increment: true},
		{Name: "created_at", Type: field.TypeTime, Default: "CURRENT_TIMESTAMP"},
		{Name: "updated_at", Type: field.TypeTime, Default: "CURRENT_TIMESTAMP"},
		{Name: "content", Type: field.TypeString, Nullable: true, Size: 2147483647},
		{Name: "deleted_at", Type: field.TypeTime, Nullable: true},
		{Name: "is_edited", Type: field.TypeBool, Default: false},
		{Name: "chat_id", Type: field.TypeInt},
		{Name: "reply_to_id", Type: field.TypeInt, Nullable: true},
		{Name: "sender_id", Type: field.TypeInt},
	}
	// MessagesTable holds the schema information for the "messages" table.
	MessagesTable = &schema.Table{
		Name:       "messages",
		Columns:    MessagesColumns,
		PrimaryKey: []*schema.Column{MessagesColumns[0]},
		ForeignKeys: []*schema.ForeignKey{
			{
				Symbol:     "messages_chats_messages",
				Columns:    []*schema.Column{MessagesColumns[6]},
				RefColumns: []*schema.Column{ChatsColumns[0]},
				OnDelete:   schema.Cascade,
			},
			{
				Symbol:     "messages_messages_reply_to",
				Columns:    []*schema.Column{MessagesColumns[7]},
				RefColumns: []*schema.Column{MessagesColumns[0]},
				OnDelete:   schema.SetNull,
			},
			{
				Symbol:     "messages_users_sent_messages",
				Columns:    []*schema.Column{MessagesColumns[8]},
				RefColumns: []*schema.Column{UsersColumns[0]},
				OnDelete:   schema.Cascade,
			},
		},
		Indexes: []*schema.Index{
			{
				Name:    "idx_messages_chat_active",
				Unique:  false,
				Columns: []*schema.Column{MessagesColumns[6], MessagesColumns[1]},
				Annotation: &entsql.IndexAnnotation{
					Desc:  true,
					Where: "deleted_at IS NULL",
				},
			},
			{
				Name:    "message_reply_to_id",
				Unique:  false,
				Columns: []*schema.Column{MessagesColumns[7]},
				Annotation: &entsql.IndexAnnotation{
					Where: "reply_to_id IS NOT NULL AND deleted_at IS NULL",
				},
			},
		},
	}
	// PrivateChatsColumns holds the columns for the "private_chats" table.
	PrivateChatsColumns = []*schema.Column{
		{Name: "id", Type: field.TypeInt, Increment: true},
		{Name: "user1_last_read_at", Type: field.TypeTime, Nullable: true},
		{Name: "user2_last_read_at", Type: field.TypeTime, Nullable: true},
		{Name: "chat_id", Type: field.TypeInt, Unique: true},
		{Name: "user1_id", Type: field.TypeInt},
		{Name: "user2_id", Type: field.TypeInt},
	}
	// PrivateChatsTable holds the schema information for the "private_chats" table.
	PrivateChatsTable = &schema.Table{
		Name:       "private_chats",
		Columns:    PrivateChatsColumns,
		PrimaryKey: []*schema.Column{PrivateChatsColumns[0]},
		ForeignKeys: []*schema.ForeignKey{
			{
				Symbol:     "private_chats_chats_private_chat",
				Columns:    []*schema.Column{PrivateChatsColumns[3]},
				RefColumns: []*schema.Column{ChatsColumns[0]},
				OnDelete:   schema.Cascade,
			},
			{
				Symbol:     "private_chats_users_private_chats_as_user1",
				Columns:    []*schema.Column{PrivateChatsColumns[4]},
				RefColumns: []*schema.Column{UsersColumns[0]},
				OnDelete:   schema.Cascade,
			},
			{
				Symbol:     "private_chats_users_private_chats_as_user2",
				Columns:    []*schema.Column{PrivateChatsColumns[5]},
				RefColumns: []*schema.Column{UsersColumns[0]},
				OnDelete:   schema.Cascade,
			},
		},
		Indexes: []*schema.Index{
			{
				Name:    "unique_user_pair",
				Unique:  true,
				Columns: []*schema.Column{PrivateChatsColumns[4], PrivateChatsColumns[5]},
			},
		},
	}
	// TempCodesColumns holds the columns for the "temp_codes" table.
	TempCodesColumns = []*schema.Column{
		{Name: "id", Type: field.TypeInt, Increment: true},
		{Name: "created_at", Type: field.TypeTime, Default: "CURRENT_TIMESTAMP"},
		{Name: "updated_at", Type: field.TypeTime, Default: "CURRENT_TIMESTAMP"},
		{Name: "email", Type: field.TypeString, Unique: true, Size: 255},
		{Name: "code", Type: field.TypeString, Size: 6},
		{Name: "mode", Type: field.TypeEnum, Enums: []string{"register", "reset"}, Default: "register"},
	}
	// TempCodesTable holds the schema information for the "temp_codes" table.
	TempCodesTable = &schema.Table{
		Name:       "temp_codes",
		Columns:    TempCodesColumns,
		PrimaryKey: []*schema.Column{TempCodesColumns[0]},
		Indexes: []*schema.Index{
			{
				Name:    "idx_temp_codes_email",
				Unique:  false,
				Columns: []*schema.Column{TempCodesColumns[3]},
			},
			{
				Name:    "idx_temp_codes_mode_time",
				Unique:  false,
				Columns: []*schema.Column{TempCodesColumns[5], TempCodesColumns[1]},
				Annotation: &entsql.IndexAnnotation{
					DescColumns: map[string]bool{
						TempCodesColumns[1].Name: true,
					},
				},
			},
		},
	}
	// UsersColumns holds the columns for the "users" table.
	UsersColumns = []*schema.Column{
		{Name: "id", Type: field.TypeInt, Increment: true},
		{Name: "created_at", Type: field.TypeTime, Default: "CURRENT_TIMESTAMP"},
		{Name: "updated_at", Type: field.TypeTime, Default: "CURRENT_TIMESTAMP"},
		{Name: "email", Type: field.TypeString, Unique: true, Size: 255},
		{Name: "password_hash", Type: field.TypeString, Nullable: true, Size: 255},
		{Name: "full_name", Type: field.TypeString, Size: 100},
		{Name: "bio", Type: field.TypeString, Nullable: true, Size: 255},
		{Name: "avatar_file_name", Type: field.TypeString, Nullable: true, Size: 255},
		{Name: "is_online", Type: field.TypeBool, Default: false},
		{Name: "last_seen_at", Type: field.TypeTime, Nullable: true},
	}
	// UsersTable holds the schema information for the "users" table.
	UsersTable = &schema.Table{
		Name:       "users",
		Columns:    UsersColumns,
		PrimaryKey: []*schema.Column{UsersColumns[0]},
	}
	// UserIdentitiesColumns holds the columns for the "user_identities" table.
	UserIdentitiesColumns = []*schema.Column{
		{Name: "id", Type: field.TypeInt, Increment: true},
		{Name: "created_at", Type: field.TypeTime, Default: "CURRENT_TIMESTAMP"},
		{Name: "updated_at", Type: field.TypeTime, Default: "CURRENT_TIMESTAMP"},
		{Name: "provider", Type: field.TypeEnum, Enums: []string{"google"}, Default: "google"},
		{Name: "provider_id", Type: field.TypeString, Size: 255},
		{Name: "provider_email", Type: field.TypeString, Nullable: true, Size: 255},
		{Name: "user_id", Type: field.TypeInt},
	}
	// UserIdentitiesTable holds the schema information for the "user_identities" table.
	UserIdentitiesTable = &schema.Table{
		Name:       "user_identities",
		Columns:    UserIdentitiesColumns,
		PrimaryKey: []*schema.Column{UserIdentitiesColumns[0]},
		ForeignKeys: []*schema.ForeignKey{
			{
				Symbol:     "user_identities_users_identities",
				Columns:    []*schema.Column{UserIdentitiesColumns[6]},
				RefColumns: []*schema.Column{UsersColumns[0]},
				OnDelete:   schema.Cascade,
			},
		},
		Indexes: []*schema.Index{
			{
				Name:    "useridentity_provider_provider_id",
				Unique:  true,
				Columns: []*schema.Column{UserIdentitiesColumns[3], UserIdentitiesColumns[4]},
			},
			{
				Name:    "useridentity_user_id_provider",
				Unique:  true,
				Columns: []*schema.Column{UserIdentitiesColumns[6], UserIdentitiesColumns[3]},
			},
		},
	}
	// Tables holds all the tables in the schema.
	Tables = []*schema.Table{
		AttachmentsTable,
		ChatsTable,
		GroupChatsTable,
		GroupMembersTable,
		MessagesTable,
		PrivateChatsTable,
		TempCodesTable,
		UsersTable,
		UserIdentitiesTable,
	}
)

func init() {
	AttachmentsTable.ForeignKeys[0].RefTable = MessagesTable
	ChatsTable.ForeignKeys[0].RefTable = MessagesTable
	GroupChatsTable.ForeignKeys[0].RefTable = ChatsTable
	GroupChatsTable.ForeignKeys[1].RefTable = UsersTable
	GroupMembersTable.ForeignKeys[0].RefTable = GroupChatsTable
	GroupMembersTable.ForeignKeys[1].RefTable = UsersTable
	MessagesTable.ForeignKeys[0].RefTable = ChatsTable
	MessagesTable.ForeignKeys[1].RefTable = MessagesTable
	MessagesTable.ForeignKeys[2].RefTable = UsersTable
	PrivateChatsTable.ForeignKeys[0].RefTable = ChatsTable
	PrivateChatsTable.ForeignKeys[1].RefTable = UsersTable
	PrivateChatsTable.ForeignKeys[2].RefTable = UsersTable
	UserIdentitiesTable.ForeignKeys[0].RefTable = UsersTable
}
