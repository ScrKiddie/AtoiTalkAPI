// Code generated by ent, DO NOT EDIT.

package migrate

import (
	"entgo.io/ent/dialect/entsql"
	"entgo.io/ent/dialect/sql/schema"
	"entgo.io/ent/schema/field"
)

var (
	// ChatsColumns holds the columns for the "chats" table.
	ChatsColumns = []*schema.Column{
		{Name: "id", Type: field.TypeInt, Increment: true},
		{Name: "created_at", Type: field.TypeTime, Default: "CURRENT_TIMESTAMP"},
		{Name: "updated_at", Type: field.TypeTime, Default: "CURRENT_TIMESTAMP"},
		{Name: "type", Type: field.TypeEnum, Enums: []string{"private", "group"}},
		{Name: "last_message_at", Type: field.TypeTime, Nullable: true},
		{Name: "last_message_id", Type: field.TypeInt, Nullable: true},
	}
	// ChatsTable holds the schema information for the "chats" table.
	ChatsTable = &schema.Table{
		Name:       "chats",
		Columns:    ChatsColumns,
		PrimaryKey: []*schema.Column{ChatsColumns[0]},
		ForeignKeys: []*schema.ForeignKey{
			{
				Symbol:     "chats_messages_last_message",
				Columns:    []*schema.Column{ChatsColumns[5]},
				RefColumns: []*schema.Column{MessagesColumns[0]},
				OnDelete:   schema.SetNull,
			},
		},
	}
	// GroupChatsColumns holds the columns for the "group_chats" table.
	GroupChatsColumns = []*schema.Column{
		{Name: "id", Type: field.TypeInt, Increment: true},
		{Name: "name", Type: field.TypeString, Size: 100},
		{Name: "description", Type: field.TypeString, Nullable: true, Size: 2147483647},
		{Name: "chat_id", Type: field.TypeInt, Unique: true},
		{Name: "avatar_id", Type: field.TypeInt, Unique: true, Nullable: true},
		{Name: "created_by", Type: field.TypeInt},
	}
	// GroupChatsTable holds the schema information for the "group_chats" table.
	GroupChatsTable = &schema.Table{
		Name:       "group_chats",
		Columns:    GroupChatsColumns,
		PrimaryKey: []*schema.Column{GroupChatsColumns[0]},
		ForeignKeys: []*schema.ForeignKey{
			{
				Symbol:     "group_chats_chats_group_chat",
				Columns:    []*schema.Column{GroupChatsColumns[3]},
				RefColumns: []*schema.Column{ChatsColumns[0]},
				OnDelete:   schema.Cascade,
			},
			{
				Symbol:     "group_chats_media_group_avatar",
				Columns:    []*schema.Column{GroupChatsColumns[4]},
				RefColumns: []*schema.Column{MediaColumns[0]},
				OnDelete:   schema.SetNull,
			},
			{
				Symbol:     "group_chats_users_created_groups",
				Columns:    []*schema.Column{GroupChatsColumns[5]},
				RefColumns: []*schema.Column{UsersColumns[0]},
				OnDelete:   schema.Cascade,
			},
		},
	}
	// GroupMembersColumns holds the columns for the "group_members" table.
	GroupMembersColumns = []*schema.Column{
		{Name: "id", Type: field.TypeInt, Increment: true},
		{Name: "role", Type: field.TypeEnum, Enums: []string{"admin", "member"}, Default: "member"},
		{Name: "last_read_at", Type: field.TypeTime, Nullable: true},
		{Name: "joined_at", Type: field.TypeTime},
		{Name: "unread_count", Type: field.TypeInt, Default: 0},
		{Name: "group_chat_id", Type: field.TypeInt},
		{Name: "user_id", Type: field.TypeInt},
	}
	// GroupMembersTable holds the schema information for the "group_members" table.
	GroupMembersTable = &schema.Table{
		Name:       "group_members",
		Columns:    GroupMembersColumns,
		PrimaryKey: []*schema.Column{GroupMembersColumns[0]},
		ForeignKeys: []*schema.ForeignKey{
			{
				Symbol:     "group_members_group_chats_members",
				Columns:    []*schema.Column{GroupMembersColumns[5]},
				RefColumns: []*schema.Column{GroupChatsColumns[0]},
				OnDelete:   schema.Cascade,
			},
			{
				Symbol:     "group_members_users_group_memberships",
				Columns:    []*schema.Column{GroupMembersColumns[6]},
				RefColumns: []*schema.Column{UsersColumns[0]},
				OnDelete:   schema.Cascade,
			},
		},
		Indexes: []*schema.Index{
			{
				Name:    "pk_group_member",
				Unique:  true,
				Columns: []*schema.Column{GroupMembersColumns[5], GroupMembersColumns[6]},
			},
		},
	}
	// MediaColumns holds the columns for the "media" table.
	MediaColumns = []*schema.Column{
		{Name: "id", Type: field.TypeInt, Increment: true},
		{Name: "created_at", Type: field.TypeTime, Default: "CURRENT_TIMESTAMP"},
		{Name: "updated_at", Type: field.TypeTime, Default: "CURRENT_TIMESTAMP"},
		{Name: "file_name", Type: field.TypeString, Unique: true, Size: 255},
		{Name: "original_name", Type: field.TypeString, Size: 255},
		{Name: "file_size", Type: field.TypeInt64},
		{Name: "mime_type", Type: field.TypeString, Size: 100},
		{Name: "status", Type: field.TypeEnum, Enums: []string{"pending", "active", "failed"}, Default: "pending"},
		{Name: "message_id", Type: field.TypeInt, Nullable: true},
		{Name: "uploaded_by_id", Type: field.TypeInt},
	}
	// MediaTable holds the schema information for the "media" table.
	MediaTable = &schema.Table{
		Name:       "media",
		Columns:    MediaColumns,
		PrimaryKey: []*schema.Column{MediaColumns[0]},
		ForeignKeys: []*schema.ForeignKey{
			{
				Symbol:     "media_messages_attachments",
				Columns:    []*schema.Column{MediaColumns[8]},
				RefColumns: []*schema.Column{MessagesColumns[0]},
				OnDelete:   schema.Cascade,
			},
			{
				Symbol:     "media_users_uploaded_media",
				Columns:    []*schema.Column{MediaColumns[9]},
				RefColumns: []*schema.Column{UsersColumns[0]},
				OnDelete:   schema.Cascade,
			},
		},
	}
	// MessagesColumns holds the columns for the "messages" table.
	MessagesColumns = []*schema.Column{
		{Name: "id", Type: field.TypeInt, Increment: true},
		{Name: "created_at", Type: field.TypeTime, Default: "CURRENT_TIMESTAMP"},
		{Name: "updated_at", Type: field.TypeTime, Default: "CURRENT_TIMESTAMP"},
		{Name: "content", Type: field.TypeString, Nullable: true, Size: 2147483647},
		{Name: "deleted_at", Type: field.TypeTime, Nullable: true},
		{Name: "is_edited", Type: field.TypeBool, Default: false},
		{Name: "chat_id", Type: field.TypeInt},
		{Name: "reply_to_id", Type: field.TypeInt, Nullable: true},
		{Name: "sender_id", Type: field.TypeInt},
	}
	// MessagesTable holds the schema information for the "messages" table.
	MessagesTable = &schema.Table{
		Name:       "messages",
		Columns:    MessagesColumns,
		PrimaryKey: []*schema.Column{MessagesColumns[0]},
		ForeignKeys: []*schema.ForeignKey{
			{
				Symbol:     "messages_chats_messages",
				Columns:    []*schema.Column{MessagesColumns[6]},
				RefColumns: []*schema.Column{ChatsColumns[0]},
				OnDelete:   schema.Cascade,
			},
			{
				Symbol:     "messages_messages_reply_to",
				Columns:    []*schema.Column{MessagesColumns[7]},
				RefColumns: []*schema.Column{MessagesColumns[0]},
				OnDelete:   schema.SetNull,
			},
			{
				Symbol:     "messages_users_sent_messages",
				Columns:    []*schema.Column{MessagesColumns[8]},
				RefColumns: []*schema.Column{UsersColumns[0]},
				OnDelete:   schema.Cascade,
			},
		},
		Indexes: []*schema.Index{
			{
				Name:    "idx_messages_chat_active",
				Unique:  false,
				Columns: []*schema.Column{MessagesColumns[6], MessagesColumns[1]},
				Annotation: &entsql.IndexAnnotation{
					Desc:  true,
					Where: "deleted_at IS NULL",
				},
			},
			{
				Name:    "message_reply_to_id",
				Unique:  false,
				Columns: []*schema.Column{MessagesColumns[7]},
				Annotation: &entsql.IndexAnnotation{
					Where: "reply_to_id IS NOT NULL AND deleted_at IS NULL",
				},
			},
		},
	}
	// OtpsColumns holds the columns for the "otps" table.
	OtpsColumns = []*schema.Column{
		{Name: "id", Type: field.TypeInt, Increment: true},
		{Name: "created_at", Type: field.TypeTime, Default: "CURRENT_TIMESTAMP"},
		{Name: "updated_at", Type: field.TypeTime, Default: "CURRENT_TIMESTAMP"},
		{Name: "email", Type: field.TypeString, Unique: true, Size: 255},
		{Name: "code", Type: field.TypeString, Size: 255},
		{Name: "mode", Type: field.TypeEnum, Enums: []string{"register", "reset", "change_email"}, Default: "register"},
		{Name: "expires_at", Type: field.TypeTime},
	}
	// OtpsTable holds the schema information for the "otps" table.
	OtpsTable = &schema.Table{
		Name:       "otps",
		Columns:    OtpsColumns,
		PrimaryKey: []*schema.Column{OtpsColumns[0]},
		Indexes: []*schema.Index{
			{
				Name:    "idx_otp_email",
				Unique:  false,
				Columns: []*schema.Column{OtpsColumns[3]},
			},
			{
				Name:    "idx_otp_mode_time",
				Unique:  false,
				Columns: []*schema.Column{OtpsColumns[5], OtpsColumns[1]},
				Annotation: &entsql.IndexAnnotation{
					DescColumns: map[string]bool{
						OtpsColumns[1].Name: true,
					},
				},
			},
			{
				Name:    "otp_expires_at",
				Unique:  false,
				Columns: []*schema.Column{OtpsColumns[6]},
			},
		},
	}
	// PrivateChatsColumns holds the columns for the "private_chats" table.
	PrivateChatsColumns = []*schema.Column{
		{Name: "id", Type: field.TypeInt, Increment: true},
		{Name: "user1_last_read_at", Type: field.TypeTime, Nullable: true},
		{Name: "user2_last_read_at", Type: field.TypeTime, Nullable: true},
		{Name: "user1_hidden_at", Type: field.TypeTime, Nullable: true},
		{Name: "user2_hidden_at", Type: field.TypeTime, Nullable: true},
		{Name: "user1_unread_count", Type: field.TypeInt, Default: 0},
		{Name: "user2_unread_count", Type: field.TypeInt, Default: 0},
		{Name: "chat_id", Type: field.TypeInt, Unique: true},
		{Name: "user1_id", Type: field.TypeInt},
		{Name: "user2_id", Type: field.TypeInt},
	}
	// PrivateChatsTable holds the schema information for the "private_chats" table.
	PrivateChatsTable = &schema.Table{
		Name:       "private_chats",
		Columns:    PrivateChatsColumns,
		PrimaryKey: []*schema.Column{PrivateChatsColumns[0]},
		ForeignKeys: []*schema.ForeignKey{
			{
				Symbol:     "private_chats_chats_private_chat",
				Columns:    []*schema.Column{PrivateChatsColumns[7]},
				RefColumns: []*schema.Column{ChatsColumns[0]},
				OnDelete:   schema.Cascade,
			},
			{
				Symbol:     "private_chats_users_private_chats_as_user1",
				Columns:    []*schema.Column{PrivateChatsColumns[8]},
				RefColumns: []*schema.Column{UsersColumns[0]},
				OnDelete:   schema.Cascade,
			},
			{
				Symbol:     "private_chats_users_private_chats_as_user2",
				Columns:    []*schema.Column{PrivateChatsColumns[9]},
				RefColumns: []*schema.Column{UsersColumns[0]},
				OnDelete:   schema.Cascade,
			},
		},
		Indexes: []*schema.Index{
			{
				Name:    "unique_user_pair",
				Unique:  true,
				Columns: []*schema.Column{PrivateChatsColumns[8], PrivateChatsColumns[9]},
			},
		},
	}
	// UsersColumns holds the columns for the "users" table.
	UsersColumns = []*schema.Column{
		{Name: "id", Type: field.TypeInt, Increment: true},
		{Name: "created_at", Type: field.TypeTime, Default: "CURRENT_TIMESTAMP"},
		{Name: "updated_at", Type: field.TypeTime, Default: "CURRENT_TIMESTAMP"},
		{Name: "email", Type: field.TypeString, Unique: true, Size: 255},
		{Name: "username", Type: field.TypeString, Unique: true, Size: 50},
		{Name: "password_hash", Type: field.TypeString, Nullable: true, Size: 255},
		{Name: "full_name", Type: field.TypeString, Size: 100},
		{Name: "bio", Type: field.TypeString, Nullable: true, Size: 255},
		{Name: "is_online", Type: field.TypeBool, Default: false},
		{Name: "last_seen_at", Type: field.TypeTime, Nullable: true},
		{Name: "avatar_id", Type: field.TypeInt, Unique: true, Nullable: true},
	}
	// UsersTable holds the schema information for the "users" table.
	UsersTable = &schema.Table{
		Name:       "users",
		Columns:    UsersColumns,
		PrimaryKey: []*schema.Column{UsersColumns[0]},
		ForeignKeys: []*schema.ForeignKey{
			{
				Symbol:     "users_media_user_avatar",
				Columns:    []*schema.Column{UsersColumns[10]},
				RefColumns: []*schema.Column{MediaColumns[0]},
				OnDelete:   schema.SetNull,
			},
		},
	}
	// UserBlocksColumns holds the columns for the "user_blocks" table.
	UserBlocksColumns = []*schema.Column{
		{Name: "id", Type: field.TypeInt, Increment: true},
		{Name: "created_at", Type: field.TypeTime, Default: "CURRENT_TIMESTAMP"},
		{Name: "updated_at", Type: field.TypeTime, Default: "CURRENT_TIMESTAMP"},
		{Name: "blocker_id", Type: field.TypeInt},
		{Name: "blocked_id", Type: field.TypeInt},
	}
	// UserBlocksTable holds the schema information for the "user_blocks" table.
	UserBlocksTable = &schema.Table{
		Name:       "user_blocks",
		Columns:    UserBlocksColumns,
		PrimaryKey: []*schema.Column{UserBlocksColumns[0]},
		ForeignKeys: []*schema.ForeignKey{
			{
				Symbol:     "user_blocks_users_blocked_users_rel",
				Columns:    []*schema.Column{UserBlocksColumns[3]},
				RefColumns: []*schema.Column{UsersColumns[0]},
				OnDelete:   schema.Cascade,
			},
			{
				Symbol:     "user_blocks_users_blocked_by_rel",
				Columns:    []*schema.Column{UserBlocksColumns[4]},
				RefColumns: []*schema.Column{UsersColumns[0]},
				OnDelete:   schema.Cascade,
			},
		},
		Indexes: []*schema.Index{
			{
				Name:    "userblock_blocker_id_blocked_id",
				Unique:  true,
				Columns: []*schema.Column{UserBlocksColumns[3], UserBlocksColumns[4]},
			},
		},
	}
	// UserIdentitiesColumns holds the columns for the "user_identities" table.
	UserIdentitiesColumns = []*schema.Column{
		{Name: "id", Type: field.TypeInt, Increment: true},
		{Name: "created_at", Type: field.TypeTime, Default: "CURRENT_TIMESTAMP"},
		{Name: "updated_at", Type: field.TypeTime, Default: "CURRENT_TIMESTAMP"},
		{Name: "provider", Type: field.TypeEnum, Enums: []string{"google"}, Default: "google"},
		{Name: "provider_id", Type: field.TypeString, Size: 255},
		{Name: "provider_email", Type: field.TypeString, Nullable: true, Size: 255},
		{Name: "user_id", Type: field.TypeInt},
	}
	// UserIdentitiesTable holds the schema information for the "user_identities" table.
	UserIdentitiesTable = &schema.Table{
		Name:       "user_identities",
		Columns:    UserIdentitiesColumns,
		PrimaryKey: []*schema.Column{UserIdentitiesColumns[0]},
		ForeignKeys: []*schema.ForeignKey{
			{
				Symbol:     "user_identities_users_identities",
				Columns:    []*schema.Column{UserIdentitiesColumns[6]},
				RefColumns: []*schema.Column{UsersColumns[0]},
				OnDelete:   schema.Cascade,
			},
		},
		Indexes: []*schema.Index{
			{
				Name:    "useridentity_provider_provider_id",
				Unique:  true,
				Columns: []*schema.Column{UserIdentitiesColumns[3], UserIdentitiesColumns[4]},
			},
			{
				Name:    "useridentity_user_id_provider",
				Unique:  true,
				Columns: []*schema.Column{UserIdentitiesColumns[6], UserIdentitiesColumns[3]},
			},
		},
	}
	// Tables holds all the tables in the schema.
	Tables = []*schema.Table{
		ChatsTable,
		GroupChatsTable,
		GroupMembersTable,
		MediaTable,
		MessagesTable,
		OtpsTable,
		PrivateChatsTable,
		UsersTable,
		UserBlocksTable,
		UserIdentitiesTable,
	}
)

func init() {
	ChatsTable.ForeignKeys[0].RefTable = MessagesTable
	GroupChatsTable.ForeignKeys[0].RefTable = ChatsTable
	GroupChatsTable.ForeignKeys[1].RefTable = MediaTable
	GroupChatsTable.ForeignKeys[2].RefTable = UsersTable
	GroupMembersTable.ForeignKeys[0].RefTable = GroupChatsTable
	GroupMembersTable.ForeignKeys[1].RefTable = UsersTable
	MediaTable.ForeignKeys[0].RefTable = MessagesTable
	MediaTable.ForeignKeys[1].RefTable = UsersTable
	MessagesTable.ForeignKeys[0].RefTable = ChatsTable
	MessagesTable.ForeignKeys[1].RefTable = MessagesTable
	MessagesTable.ForeignKeys[2].RefTable = UsersTable
	OtpsTable.Annotation = &entsql.Annotation{
		Table: "otps",
	}
	PrivateChatsTable.ForeignKeys[0].RefTable = ChatsTable
	PrivateChatsTable.ForeignKeys[1].RefTable = UsersTable
	PrivateChatsTable.ForeignKeys[2].RefTable = UsersTable
	UsersTable.ForeignKeys[0].RefTable = MediaTable
	UserBlocksTable.ForeignKeys[0].RefTable = UsersTable
	UserBlocksTable.ForeignKeys[1].RefTable = UsersTable
	UserIdentitiesTable.ForeignKeys[0].RefTable = UsersTable
}
